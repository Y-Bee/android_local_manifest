From 5b85ef2e3ecfae09a9c59a1c8058459db1f14330 Mon Sep 17 00:00:00 2001
From: Konsta <konsta09@gmail.com>
Date: Wed, 27 Mar 2013 10:01:20 +0200
Subject: [PATCH 7/9] don't hide pie control settings

Change-Id: Ib0a9b2029174a12fa96a86a9e05b8a867bdf3111
---
 res/values/cm_strings.xml                          |    2 +-
 res/xml/system_ui_settings.xml                     |   10 +++++-----
 .../settings/cyanogenmod/SystemUiSettings.java     |    1 -
 3 files changed, 6 insertions(+), 7 deletions(-)

diff --git a/res/values/cm_strings.xml b/res/values/cm_strings.xml
index cc40753..13761ab 100644
--- a/res/values/cm_strings.xml
+++ b/res/values/cm_strings.xml
@@ -868,7 +868,7 @@ two in order to insert additional control points. \'Remove\' deletes the selecte
 
     <!-- Pie controls -->
     <string name="pie_control_title">Pie controls</string>
-    <string name="pie_control_enabled">Floating controls when Expanded desktop is enabled</string>
+    <string name="pie_control_enabled">Floating controls enabled</string>
     <string name="pie_control_disabled">Floating controls disabled</string>
     <string name="pie_control_sensitivity_title">Responsiveness</string>
     <string name="pie_control_sensitivity_low">Low</string>
diff --git a/res/xml/system_ui_settings.xml b/res/xml/system_ui_settings.xml
index ac52c6b..030783b 100644
--- a/res/xml/system_ui_settings.xml
+++ b/res/xml/system_ui_settings.xml
@@ -46,6 +46,11 @@
         android:title="@string/power_menu_expanded_desktop"
         android:persistent="false" />
 
+    <PreferenceScreen
+        android:key="pie_control"
+        android:fragment="com.android.settings.cyanogenmod.PieControl"
+        android:title="@string/pie_control_title" />
+
     <PreferenceCategory
         android:key="navigation_bar"
         android:title="@string/navigation_bar_category" >
@@ -68,11 +73,6 @@
             android:entryValues="@array/nav_buttons_height_values"
             android:defaultValue="48"
             android:persistent="false" />
-
-        <PreferenceScreen
-            android:key="pie_control"
-            android:fragment="com.android.settings.cyanogenmod.PieControl"
-            android:title="@string/pie_control_title" />
     </PreferenceCategory>
 
 </PreferenceScreen>
diff --git a/src/com/android/settings/cyanogenmod/SystemUiSettings.java b/src/com/android/settings/cyanogenmod/SystemUiSettings.java
index 4577a2a..4d1be2b 100644
--- a/src/com/android/settings/cyanogenmod/SystemUiSettings.java
+++ b/src/com/android/settings/cyanogenmod/SystemUiSettings.java
@@ -97,7 +97,6 @@ public class SystemUiSettings extends SettingsPreferenceFragment  implements
             // Hide navigation bar category on devices without navigation bar
             if (!hasNavBar) {
                 prefScreen.removePreference(findPreference(CATEGORY_NAVBAR));
-                mPieControl = null;
             }
         } catch (RemoteException e) {
             Log.e(TAG, "Error getting navigation bar status");
-- 
1.7.9.5

